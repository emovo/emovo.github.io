<!DOCTYPE html>
<html lang="en" dir="ltr">
    <title>EMOVO</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
    body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", Arial, Helvetica, sans-serif}
    /*.place {
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      padding: 16px;
      text-align: center;
      background-color: #f1f1f1;
    }*/
    body {
    overflow-y: scroll;
    position: fixed;
    width: 100%;
    height: 100%;

}
    .places {
      width: 100%;
      table-layout: fixed;
      border-collapse: seperate;
      /*padding-right:4%;*/
    }
    .places button {
      width: 80%;
      height:10%;
      margin: 0 auto;
      border: 10px solid #F0F0F0;
    }
    body {
    width:100%;
    position: fixed;
    }
    .left {
        display: inline-block;
        background-color:orange;
        color:white;
        position: absolute;
        height:100%;
        width:15%;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }
    .right {
        display: inline-block;
        position: absolute;
        text-align: center;
        right: 0;
    }
    .pagination {
      display: inline-block;
      margin: 0 auto;
    }
    .pagination a {
      color: black;
      padding: 8px 16px;
      text-decoration: none;
    }
    .pagination a.active {
      background-color: #4CAF50;
      color: white;
    }
.pagination a:hover:not(.active) {background-color: #ddd;}
    </style>
  <body class="w3-light-grey">
    <!-- Navigation Bar GET RID OF W3-TOP TO ENABLE SCROLLBAR-->
    <div class="w3-bar w3-light-grey w3-card w3-left-align w3-large">
      <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-orange" href="javascript:void(0);" onclick="toggle()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
      <!--<a href="index.html" class="w3-bar-item w3-button w3-text-orange w3-hide-small w3-padding-large w3-hover-orange"><b><i class="fa fa-map-marker w3-margin-right"></i>Logo</b></a>-->
      <a href="index.html" class="w3-bar-item w3-button w3-text-orange w3-hide-small w3-padding-large w3-hover-orange"><b><img src="emovo.png" width="25px" height="25px" alt="EMOVO"></img></b></a>
      <!--<a href="#" class="w3-bar-item w3-button w3-padding-large w3-white">Home</a>-->
      <a href="about.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-orange">About</a>
      <a href="contact.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-orange">Contact</a>
      <a href="search.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-orange">Search</a>
      <!--<a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Sign In</a>-->
      <!--<a href="profile.html" class="w3-bar-item w3-button w3-right w3-hide-small w3-padding-large w3-hover-orange w3-text-grey"><i class="fa fa-user"></i>  Your Profile</b></a>-->
    </div>
    <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
      <a href="index.html" class="w3-bar-item w3-button w3-padding-large">EMOVO</a>
      <a href="about.html" class="w3-bar-item w3-button w3-padding-large">About</a>
      <a href="contact.html" class="w3-bar-item w3-button w3-padding-large">Contact</a>
      <a href="search.html" class="w3-bar-item w3-button w3-padding-large">Search</a>
      <!--<a href="profile.html" class="w3-bar-item w3-button w3-padding-large">Your Profile</a>-->
    </div>
      <div class="right">
        <p></p>
          <table id="table" class="places">
            <select id="pages" name="page" onchange="changePage()">
                <option value="1" selected="selected">1</option>
                <!--<option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>-->
            </select>
            <input type="text" id="input" onkeyup="filter()" placeholder="Search" title="Country or State">
            <br>
            <p id="pageCount"></p>
            <br>
            <h3 id="title">Our Specialized Place Rankings for You to Retire</h3>
            <img id="image" src="#" width="100px" height="100px" alt="Flag">
            <!--<ul id="myUL">
              <input type="text" id="input" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">
              -<li><a href="#">Adele</a></li>
              <li><a href="#">Agnes</a></li>

              <li><a href="#">Billy</a></li>
              <li><a href="#">Bob</a></li>

              <li><a href="#">Calvin</a></li>
              <li><a href="#">Christina</a></li>
              <li><a href="#">Cindy</a></li>
            </ul>-->
             <tr>
                <td>
             </tr>
            </table>
        </div>
        <!--<div id="sorting" class="left">
          <div>
            <p>Attributes you want to sort by:</p>
            <form action="">
              <input type="radio" name="sortType" value="male"> Current<br>
              <p></p>
              <input type="radio" name="sortType" value="female"> Female<br>
              <p></p>
              <input type="radio" name="sortType" value="other"> Other
              <p></p>
              <button type="submit">Sort</button>
            </form>
          </div>
        </div>-->
  </body>
  <script type="text/javascript">
  function toggle() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
      x.className += " w3-show";
    } else {
      x.className = x.className.replace(" w3-show", "");
    }
  }
  var stateCapitals={
    'Alabama': 'Montgomery',
    'Alaska': 'Juneau',
    'Arizona':'Phoenix',
    'Arkansas':'Little Rock',
    'California': 'Sacramento',
    'Colorado':'Denver',
    'Connecticut':'Hartford',
    'Delaware':'Dover',
    'Florida': 'Tallahassee',
    'Georgia': 'Atlanta',
    'Hawaii': 'Honolulu',
    'Idaho': 'Boise',
    'Illinois': 'Springfield',
    'Indiana': 'Indianapolis',
    'Iowa': 'Des Monies',
    'Kansas': 'Topeka',
    'Kentucky': 'Frankfort',
    'Louisiana': 'Baton Rouge',
    'Maine': 'Augusta',
    'Maryland': 'Annapolis',
    'Massachusetts': 'Boston',
    'Michigan': 'Lansing',
    'Minnesota': 'St. Paul',
    'Mississippi': 'Jackson',
    'Missouri': 'Jefferson City',
    'Montana': 'Helena',
    'Nebraska': 'Lincoln',
    'Nevada': 'Carson City',
    'New Hampshire': 'Concord',
    'New Jersey': 'Trenton',
    'New Mexico': 'Santa Fe',
    'New York': 'Albany',
    'North Carolina': 'Raleigh',
    'North Dakota': 'Bismarck',
    'Ohio': 'Columbus',
    'Oklahoma': 'Oklahoma City',
    'Oregon': 'Salem',
    'Pennsylvania': 'Harrisburg',
    'Rhode Island': 'Providence',
    'South Carolina': 'Columbia',
    'South Dakota': 'Pierre',
    'Tennessee': 'Nashville',
    'Texas': 'Austin',
    'Utah': 'Salt Lake City',
    'Vermont': 'Montpelier',
    'Virginia': 'Richmond',
    'Washington': 'Olympia',
    'West Virginia': 'Charleston',
    'Wisconsin': 'Madison',
    'Wyoming': 'Cheyenne'
}
  function changePage() {
      var pages = document.getElementById("pages");
      var selectedPage = pages.options[pages.selectedIndex].value;
      //console.log(selectedPage)
      //console.log(start)
      //console.log(end)
      var table = document.getElementById("table");
      var btn = table.getElementsByTagName("button");
      var divisibleCounter=0
      for (i = 0; i < btn.length; i++) {
          if(i % 50==0){
            divisibleCounter++
          }
          if(divisibleCounter==selectedPage){
            for (i2 = i; i2 < i+50; i2++) {
              if(i2<btn.length)
                btn[i2].style.display = "block";
              else
                break;
            }
            return true;
          }else{
            btn[i].style.display = "none";
          }
        }
      /*<select id="pages" name="page" onchange="changePage()">
          <option value="1" selected="selected">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
      </select>*/
  }
  var currPlace=null
  //console.log(localStorage.sortedCities)
  var cities=JSON.parse(localStorage.sortedCities)
  if(localStorage.citiesPlace=="US"){
    currPlace=JSON.parse(localStorage.currState)
  }else{
    currPlace=JSON.parse(localStorage.currNation)
  }
  createbtnStates()
  function createbtnStates() {
      var size=0
      //console.log(cities)
      var rank=1
      var pageCount=parseInt(Object.keys(cities).length / 50)+1 //max 50 per page
      //console.log(pageCount+"")
      for(var k=1; k<pageCount; k++){
        var option=document.createElement("option");
        option.value = k+1;
        option.innerHTML = option.value+"";
        document.getElementById("pages").appendChild(option);
      }
      if(pageCount>1)
        document.getElementById("pageCount").innerHTML="(1 of "+pageCount+" pages)"
      else
        document.getElementById("pageCount").innerHTML="(1 of "+pageCount+" page)"
      //console.log(perPage+"")
      //console.log(localStorage.citiesPlace)
      if(localStorage.citiesPlace=="US"){
        document.getElementById("image").style.display="none"
        document.getElementById("title").innerHTML="Specialized City Rankings for You"
        for(var k in cities){//name,rating,flaglink,capitalCity,ratings
          var btn = document.createElement("BUTTON");
          btn.className="w3-button w3-orange";
          btn.style.spacingBorder="2%";
          btn.id=cities[k][1].name.replace(" ","-")
          btn.onclick=function(){
            document.getElementById("input").value=""
            for(var k2 in cities){
              if(cities[k2][0]==this.id.replace("-"," ")){
                localStorage.citiesPlace="US"
                localStorage.setItem("usCity",JSON.stringify(cities[k2][1]))
                localStorage.currStateCity=JSON.stringify(currPlace)
                location.href="usCitiesProfile.html"
              }
            }
          }
          var h = document.createElement("H3");
          var t = document.createTextNode("#"+rank+": "+cities[k][1].name);
          h.appendChild(t);
          btn.appendChild(h);
          var p = document.createElement("P");
          if(localStorage.citiesPlace!="US"){
              try{
                t = document.createTextNode(cities[k][1].subcountry);
                p.appendChild(t);
              }catch(err){}
          }
          btn.appendChild(p);
          var p2 = document.createElement("P");
          //t = document.createTextNode("Rating: ");
          //p2.appendChild(t);
          btn.appendChild(p2);
          document.getElementById("table").appendChild(btn);
          if(rank>50)
            document.getElementById(btn.id).style.display="none"
          rank++
    }
  }else{
      var datarank=1
      var citynames=[]
    //  document.getElementById("sorting").style.display="none"
      var currNation=JSON.parse(localStorage.currNation)
      document.getElementById("image").src=currNation.flaglink
      document.getElementById("title").innerHTML="City Affordability Rankings for You (ranked places have a stored cost of living metric)"
      for(var k in cities){//name,rating,flaglink,capitalCity,ratings
        if(citynames.indexOf(cities[k].name)<0){
          citynames.push(cities[k].name)
          var btn = document.createElement("BUTTON");
          btn.className="w3-button w3-orange";
          btn.style.spacingBorder="2%";
          btn.id=cities[k].name.replace(" ","-")
          btn.onclick=function(){
            //console.log(this.id.replace("-"," "))
            //console.log(cities)
            document.getElementById("input").value=""
            for(var k2 in cities){
              if(cities[k2].name==this.id.replace("-"," ")){
                  localStorage.setItem("currNation",JSON.stringify(currNation))
                  localStorage.setItem("worldCity",JSON.stringify(cities[k2]))
                  location.href="worldCitiesProfile.html"
              }
            }
          }
          var h = document.createElement("H3");
          var t=null
          if(parseFloat(cities[k].costOfLiving)==-1.0)
            t = document.createTextNode(cities[k].name);
          else{
            t = document.createTextNode("#"+datarank+": "+cities[k].name);
            datarank++
          }
          h.appendChild(t);
          btn.appendChild(h);
          var p = document.createElement("P");
          try{
                t = document.createTextNode(cities[k].subcountry);
                p.appendChild(t);
          }catch(err){}
          btn.appendChild(p);
          var p2 = document.createElement("P");
          //t = document.createTextNode("Rating: ");
          //p2.appendChild(t);
          btn.appendChild(p2);
          document.getElementById("table").appendChild(btn);
          if(rank>50)
            document.getElementById(btn.id).style.display="none"
          rank++
      }
    }
  }
  }
  function filter() {
    var input = document.getElementById("input");
    var fil = input.value.toUpperCase();
    var table = document.getElementById("table");
    var btn = table.getElementsByTagName("button");
    for (i = 0; i < btn.length; i++) {
        txtValue = btn[i].id.replace("-"," ")
        //console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(fil) > -1) {
            btn[i].style.display = "";
        } else {
            btn[i].style.display = "none";
        }
    }
}
  </script>
</html>
