<!DOCTYPE html>
<html lang="en" dir="ltr">
    <title>W3.CSS Template</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<body class="w3-light-grey">
     <div>
        <div class="w3-bar w3-light-grey w3-card w3-left-align w3-large">
          <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-orange" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
          <a href="#" class="w3-bar-item w3-button w3-text-orange w3-hover-orange"><b><i class="fa fa-map-marker w3-margin-right"></i>Logo</b></a>
          <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Link 1</a>
          <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Link 2</a>
          <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Link 3</a>
          <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Link 4</a>
        </div>
      </div>
      <div class="w3-orange">
        <img id="flaglink" src="#" width="200px"><!--have it to the left with basic facts about area-->
        <h3 id="sname">State name (Capital: )</h3>
        <h4 id="capital">Capital</h4>
        <p id="avgStar"></p>
        <p id="summary">
          <!--Strong Points:
          <br>
          Average Qualities:
          <br>
          Weaker Points:
          <br>-->
          The data was compiled from numerous sources as explained <a href="about.html">here</a>. If you find any major errors, please send me an email through <a href="contact.html">here</a>.
          Post in the comments to provide a helpful view of this state to others! Conversely, be sure to look in the comments for more specific details from those who lived there. To find the best cities in the state, click the "Optimized City Search" button, or if you wish to re-enter data click the "Input New Data" button below.
        </p>
      </div>
      <div style="display:table; margin:0 auto;">
             <button onclick="onCitySearchClick()" style="float: left;border: 2px solid #E8E8E8;" class="w3-button w3-orange">Optimized City Search</button>
             <button onclick="search.html" style="float: right;border: 2px solid #E8E8E8;" class="w3-button w3-orange">Input New Data</button>
      </div>
      <br>
      <!--<div class="right-text">
        <h4>Notes</h4>

      </div>-->
      <div class="right-data">
        <div class="right-right-data">
        <table class="tableData" style="margin:auto;">
              <div class="econ">
                <h5 style="margin:0 auto;text-align:center; background-color:green; color:white;">Economic Data  <i class="fa fa-dollar"></i></h5>
                <!--<h6 id="econSortRank" style="text-align:center; color:green;">80th percentile (#5)</h6>-->
                    <tr>
                      <td>State Data</td>
                    </tr>
                    <tr>
                      <td>Avg Income</td>
                      <td id="avgIncome">$10000
                        <td id="avgIncomeDiff" style="color:green;">
                          <div class="tooltip">
                            <span id="avgIncomeDiffVal" style="border-bottom: 1px dotted #000;text-decoration: none;">$10000</span>
                            <span id="tooltiptextavgIncome" class="tooltiptext">Better than avg.</span>
                          </div>
                      </td>
                     </td>
                    </tr>
                    <tr>
                      <td>Median Property Cost: </td>
                      <td id="median">$10000</td>
                      <td id="medianDiff" style="color:green;">
                          <div class="tooltip">
                            <span id="medianDiffVal">$10000</span>
                            <span id="tooltiptextmedianDiff" class="tooltiptext">Better than avg.
                            </span>
                          </div>
                      </td>
                    </tr>
                    <tr>
                      <td>Healthcare Cost: </td>
                      <td id="healthCareCost"></td>
                    </tr>
                    <tr>
                      <td>Unemployment Rate: </td>
                      <td id="unemploymentRate"></td>
                    </tr>
                    <tr>
                      <td>Income Tax: </td>
                      <td id="incomeTax"></td>
                    </tr>
                    <tr>
                      <td>Property Tax: </td>
                      <td id="propertyTax"></td>
                    </tr>
                    <tr>
                      <td>Sales Tax: </td>
                      <td id="salesTax"></td>
                    </tr>
                </div>
            </table>
            <br>
            <table style="margin:0 auto;">
              <div class="phealth">
                  <table class="tableData" style="margin:0 auto;">
                    <h5 style="margin:0 auto;text-align:center;background:red;color:white;">Personal Health Data <i class="fa fa-plus-square"></i></h5>
                    <!--<h6 id="healthSortRank" style="text-align:center; color:green;">80th percentile (#5)</h6>-->
                    <tr>
                      <td>State Data</td>
                    </tr>
                    <tr>
                      <td>People: 1 Doctor Ratio</td>
                      <td id="popPerDoctorRatio">200 people per doctor</td>
                    </tr>
                    <tr>
                      <td>People: 1 Dentist Ratio</td>
                      <td id="popPerDentistRatio">200 people per dentist</td>
                    </tr>
                    <tr>
                      <td>People: 1 Mental Health Provider Ratio</td>
                      <td id="popPerMentalHealthRatio">200 people per mental health providers</td>
                    </tr>
                    <tr>
                      <td>People: 1 Nursing or Physician Health Provider Ratio</td>
                      <td id="popOtherHealthRatio">200 people per nursing and physician health <br>providers</td>
                    </tr>
                    <tr>
                      <td>% of Eligible Medicare Enrollees Having an Annual Diabetic Screening</td>
                      <td id="diabeticScreening">23% of eligible Medicare enrollees got an annual <br>diabetic screening</td>
                    </tr>
                    <tr>
                      <td>% of Eligible Medicare Enrollees Having an Annual Mammogram Screening</td>
                      <td id="mammogramScreening">23% of eligible Medicare enrollees got an<br> annual mammogram screening</td>
                    </tr>
                  </table>
              </div>
            </table>
            <br>
            <br>
            <table style="margin:0 auto;">
              <div class="chealth">
                  <table class="tableData" style="margin:0 auto;">
                    <h5 style="margin:0 auto;text-align:center; background:gold;width:56.5%;">Community Health Data <i class="fa fa-hospital-o"></i></h5>
                    <!--<h6 id="comHealthSortRank" style="text-align:center; color:green;">80th percentile (#5)</h6>-->
                    <tr>
                      <td>State Data</td>
                    </tr>
                    <tr>
                      <td>% of State Residents Near a Park or Recreational Center</td>
                      <td id="exerciseAccess">200 people per doctor</td>
                    </tr>
                    <tr>
                      <td>People: 1 Social Association Ratio</td>
                      <td id="socialGroup">200 people per dentist</td>
                    </tr>
                    <tr>
                      <td>Violent Crime Percentage Rate</td>
                      <td id="violentCrime">200 people per mental health providers</td>
                    </tr>
                    <tr>
                      <td>People: 1 Nursing or Physician Health Provider</td>
                      <td id="popHealth">200 people per <br>nursing and physician health providers</td>
                    </tr>
                    <tr>
                      <td>% of Residents with Limited Food Access</td>
                      <td id="foodInsecurity">23% of eligible Medicare enrollees got an<br> annual diabetic screening</td>
                    </tr>
                    <tr>
                      <td>% of Residents who're Low Income and aren't Near Food Sources (i.e. grocery stores)</td>
                      <td id="limitedFoodAccess">23% of eligible Medicare enrollees got an<br> annual mammogram screening</td>
                    </tr>
                  </table>
              </div>
            </table>
            <br>
            <table style="margin:0 auto;">
              <div class="env">
                  <table class="tableData" style="margin:0 auto;">
                    <h5 style="margin:0 auto;text-align:center;background:#00FF00;width:56.5%">Environment Data <i class="fa fa-industry"></i></h5>
                    <!--<h6 id="comHealthSortRank" style="color:green;text-align:center;">80th percentile (#5)</h6>-->
                    <tr style="text-align:center;">
                      <td>State Data</td>
                    </tr>
                    <tr>
                      <td>Pollution (ppm-parts per million)</td>
                      <td id="pollution" style="text-align:left;">200 people per doctor</td>
                    </tr>
                    <tr>
                      <td>Food Health Index (1-worst, 10-best)</td>
                      <td id="foodHealthIndex" style="text-align:left;">200 people per dentist</td>
                    </tr>
                    <tr>
                      <td>% of Residents who're Under Poor Quality Water System: </td>
                      <td id="waterViolations" style="text-align:left;">200 people per mental health providers</td>
                    </tr>
                    <tr>
                      <td>% of Residents Living in Poor Quality Housing: </td>
                      <td id="housingIssues" style="text-align:left;">200 people per <br>nursing and physician health providers</td>
                    </tr>
                    <tr>
                      <td>Mean Work Commute Time (minutes): </td>
                      <td id="meanCommute" style="text-align:left;">23% of eligible Medicare enrollees got an<br> annual diabetic screening</td>
                    </tr>
                    <tr>
                      <td>Average Annual Temperature: </td>
                      <td id="temp"></td>
                      <td id="tempDiff" style="text-align:left; color:green;">
                        <div class="tooltip">
                          <span id="tempDiffVal"></span>
                          <span id="tooltiptexttempDiff" class="tooltiptext">
                          </span>
                        </div>
                      </td>
                    </tr>
                  </table>
              </div>
            </table>
      </div>
      <br>
      <div style="display:table; margin: auto;">
        <p>Featured Location Video</p>
        <iframe id="video" width="400" height="300" src="#">
        </iframe>
      </div>
     <br>
     <p id="login" style="display:table; margin: 0 auto;">You must be logged in to rate and comment</p>
     <br>
     <div class="userReply">
       <p style="margin: auto;">How would you rate the place in terms of livability, especially in regards to retirees (1-5 stars)? Explain in the comment box below if you wish to futher elaborate to inform other users.</p>
       <p></p>
           <form id="starsRating" style="display: inline-block;">
             <input class="star star-5" id="star-5" type="radio" name="star" value="5"/>
             <label class="star star-5" for="star-5"></label>
             <input class="star star-4" id="star-4" type="radio" name="star" value="4"/>
             <label class="star star-4" for="star-4"></label>
             <input class="star star-3" id="star-3" type="radio" name="star" value="3"/>
             <label class="star star-3" for="star-3"></label>
             <input class="star star-2" id="star-2" type="radio" name="star" value="2"/>
             <label class="star star-2" for="star-2"></label>
             <input class="star star-1" id="star-1" type="radio" name="star" value="1"/>
             <label class="star star-1" for="star-1"></label>
           </form>
           <div class="container">
             <div class="left-pic">
               <img id="profileImg" src="https://cdn2.iconfinder.com/data/icons/website-icons/512/User_Avatar-512.png" width="70px" height="70px" style="border-radius: 50%;">
             </div>
            <div class="right">
                  <textarea id="yourComment" name="name" rows="4" cols="40" placeholder="Enter comment here"></textarea>
             </div>
           </div>
           <p></p>
           <div>
             <button class="w3-button w3-orange" type="submit" onclick="sendMessage()">Send rating and/or review</button>
           </div>
     </div>
    </div>
    <div id="justSents">
    </div>
    <div style="margin-left:-8px;margin-right:-8px"><hr style="color:Black;background-color:Black;border:0;width:100%;height:1px;" /></div>
    <div id="commentSpace">
      <div class="container" style="margin:0 auto">
        <div>
          <input type="text" id="input" onkeyup="filter()" placeholder="Search" title="Country or State">
        </div>
        <div>
          <select id="commentFilter">
            <option value="keywords" selected="selected">Keywords</option>
            <!--<option value="mostLiked">Most liked</option>-->
            <option value="commenter">Commenter</option>
            <option value="replies">Replies to you</option>
          </select>
        </div>
     </div>
   </div>
   <div id="updownSort">

   </div>
</body>
<style>

body, html {
	height: 100%;
	width: 100%;
}
.tooltip {
  position: relative;
  display: inline-block;
  top: 100%;
}
.tooltip .tooltiptext{
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;

  /* Position the tooltip
    z-index: 1;
    bottom: 100%;
    left: 10%;*/
}
.tooltip:hover .tooltiptext {
  visibility: visible;
}
.left-data{
  display: inline-block;
  background-color:orange;
  color:white;
  position: absolute;
  height:150%;
  width:15%;
  /*top: 0;*/
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.right-right-data{
  display: inline-block;
}
.right-data{
  width: 100%;
  text-align: center;
  /*display:table;
  margin: 0 auto;
  vertical-align: middle;*/
  /*position: absolute;
  text-align: center;
  right: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;*/
}
.right-text{
  display: inline-block;
  background-color:orange;
  color:white;
  position: absolute;
  height:100%;
  width:15%;
  right: 0;
  text-align: center;
  overflow: hidden;
}
.fourTable, td {
border: 1px solid black;
}
/*.top-boxes{
  display:table;
  margin: 0 auto;
}
.econ{
  width:10%;
  border: 15px solid green;
}
.phealth{
  width:10%;
  border: 15px solid green;
}

.bottom-boxes{
  display:table;
  margin: 0 auto;
}
.chealth{
  width:10%;
  border: 15px solid green;
}
.env{
  width:10%;
  border: 15px solid green;
}*/
.loadMore{
  display: table;
  margin: 0 auto;
}
.userReply{
  width: 36%;
  display: table;
  margin: 0 auto;
  text-align: center;
}
.container{
  width:500px;
  min-height:65px;
}
.left-pic{
  float: left;
  width:50px;
}
.right{
  float: right;
  width:400px;
}
.comment-body {
  display: inline-block;
  vertical-align: middle;
  width: 400px;
  min-height: 65px;
  color: #555;
  background-color: white;
}
input.star { display: none; }
label.star {
	  float: right;
    margin:0 auto;
	  padding: 10px;
	  font-size: 36px;
	  color: #444;
	  transition: all .2s;
	}
input.star:checked ~ label.star:before {
	  content: '\f005';
	  color: #FD4;
	  transition: all .25s;
	}
	input.star-5:checked ~ label.star:before {
	  color: #FE7;
	  text-shadow: 0 0 20px #952;
	}
	input.star-1:checked ~ label.star:before { color: #F62; }
	label.star:before {
	  content: '\f006';
	  font-family: FontAwesome;
	}
  .tableData {
  border-collapse: collapse;
  width: 75%;
}

.tableData td, .tableData th {
  border: 1px solid #ddd;
  padding: 8px;
}

.tableData tr:nth-child(even){background-color: #f2f2f2;}

.tableData tr:hover {background-color: #ddd;}

.tableData th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
<script type="text/javascript">
var stateCapitals={
  'Alabama': 'Montgomery',
  'Alaska': 'Juneau',
  'Arizona':'Phoenix',
  'Arkansas':'Little Rock',
  'California': 'Sacramento',
  'Colorado':'Denver',
  'Connecticut':'Hartford',
  'Delaware':'Dover',
  'Florida': 'Tallahassee',
  'Georgia': 'Atlanta',
  'Hawaii': 'Honolulu',
  'Idaho': 'Boise',
  'Illinois': 'Springfield',
  'Indiana': 'Indianapolis',
  'Iowa': 'Des Monies',
  'Kansas': 'Topeka',
  'Kentucky': 'Frankfort',
  'Louisiana': 'Baton Rouge',
  'Maine': 'Augusta',
  'Maryland': 'Annapolis',
  'Massachusetts': 'Boston',
  'Michigan': 'Lansing',
  'Minnesota': 'St. Paul',
  'Mississippi': 'Jackson',
  'Missouri': 'Jefferson City',
  'Montana': 'Helena',
  'Nebraska': 'Lincoln',
  'Nevada': 'Carson City',
  'New Hampshire': 'Concord',
  'New Jersey': 'Trenton',
  'New Mexico': 'Santa Fe',
  'New York': 'Albany',
  'North Carolina': 'Raleigh',
  'North Dakota': 'Bismarck',
  'Ohio': 'Columbus',
  'Oklahoma': 'Oklahoma City',
  'Oregon': 'Salem',
  'Pennsylvania': 'Harrisburg',
  'Rhode Island': 'Providence',
  'South Carolina': 'Columbia',
  'South Dakota': 'Pierre',
  'Tennessee': 'Nashville',
  'Texas': 'Austin',
  'Utah': 'Salt Lake City',
  'Vermont': 'Montpelier',
  'Virginia': 'Richmond',
  'Washington': 'Olympia',
  'West Virginia': 'Charleston',
  'Wisconsin': 'Madison',
  'Wyoming': 'Cheyenne'
}
//document.getElementById("myModal").style="display:none;"
var state=JSON.parse(localStorage.getItem("stateSearch"))

document.getElementById("video").src="https://www.youtube.com/embed/?listType=search&list=best-places-to-live-in-"+state.name.replace(" "+"-")+"&autoplay=1"
//document.getElementById("video").src="https://www.youtube.com/embed/?listType=search&list=living-in-"+state.name.replace(" "+"-")+"&autoplay=1"
//console.log(state)
document.getElementById("starsRating").reset()
if(state.name!="District of Columbia"){
    document.getElementById("flaglink").src=state.flaglink
    document.getElementById("capital").innerHTML="Capital City: "+stateCapitals[state.name]
}
else{
  document.getElementById("flaglink").src="https://www.states101.com/img/flags/png/small/district-of-columbia.png"
  document.getElementById("capital").innerHTML="Capital of United States"
}
document.getElementById("sname").innerHTML=state.name

document.getElementById("avgIncome").innerHTML="$"+state.avgIncome.toFixed(2)
document.getElementById("avgIncomeDiffVal").style.display="none"
document.getElementById("avgIncomeDiff").style.display="none"
document.getElementById("tooltiptextavgIncome").style.display="none"
/*document.getElementById("avgIncomeDiffVal").innerHTML="$"+(localStorage.monthlyIncomeUS*12.0).toFixed(2)
var avgIncomeDiffStyle="border: none; color:green;"
document.getElementById("avgIncomeDiff").style=avgIncomeDiffStyle
var text=""
var fract=state.avgIncome/(localStorage.monthlyIncomeUS*12.0)
//console.log(fract+"")
if(fract<.25){
  text="Looking at income alone, your economic status is very above average"
  avgIncomeDiffStyle="border: none; color:green;"
}
else if(fract>=1.75){
  text="Looking at income alone, your economic status is very below average"
  avgIncomeDiffStyle="border: none; color:red;"
}
else if(fract>.75 && fract<1.25){
  text="Looking at income alone, your economic status is around average"
  avgIncomeDiffStyle="border: none; color:orange;"
}
else if(fract<=.75){
  text="Looking at income alone, your economic status is above average"
  avgIncomeDiffStyle="border: none; color:green;"
}
else if(fract>=1.25){
  text="Looking at income alone, your economic status is below average"
  avgIncomeDiffStyle="border: none; color:red;"
}
document.getElementById("tooltiptextavgIncome").innerHTML=text*/
document.getElementById("median").innerHTML="$"+state.medianPropertyCost.toFixed(2)
/*if(state.medianDiff==null){
  state.medianDiff=parseFloat(localStorage.yourSavingsUS) + ((parseFloat(localStorage.monthlyIncomeUS*12.0))-state.avgIncome)-state.medianPropertyCost
  //console.log(state.medianDiff+"")
}
var medianDiffStyle="border: none;"
text="Based on your savings of $"+parseFloat(localStorage.yourSavingsUS).toFixed(2)+" and income"
if(state.medianDiff>=state.medianPropertyCost/6.0){
  text+=", housing is pretty affordable"
  medianDiffStyle="border: none; color:green;"
}
else if(state.medianDiff>=state.medianPropertyCost/12.0){
  text+=", housing is affordable"
  medianDiffStyle="border: none; color:green;"
}
else if(state.medianDiff>=0.0){
  text+=", housing is somewhat average"
  medianDiffStyle="border: none; color:orange;"
}
else if(state.medianDiff<=-state.medianPropertyCost/6.0){
  text+=", housing is not affordable"
  medianDiffStyle="border: none; color:red;"
}
else if(state.medianDiff<=-state.medianPropertyCost/12.0){
    text+=", housing is not very affordable"
    medianDiffStyle="border: none; color:red;"
}
document.getElementById("medianDiffVal").innerHTML=text//"$"+state.medianDiff.toFixed(2)
document.getElementById("medianDiff").style=medianDiffStyle*/
document.getElementById("medianDiffVal").style.display="none"
document.getElementById("medianDiff").style.display="none"
document.getElementById("tooltiptextmedianDiff").style.display="none"

document.getElementById("exerciseAccess").innerHTML=(state.exerciseAccess*100.0).toFixed(1)+"%"
document.getElementById("socialGroup").innerHTML=state.socialGroup.toFixed(3)+""
document.getElementById("violentCrime").innerHTML=(state.violentCrime).toFixed(3)+"/100,000 people"
document.getElementById("popHealth").innerHTML=state.popHealth.toFixed(3)+""
document.getElementById("foodInsecurity").innerHTML=(state.foodInsecurity*100.0).toFixed(2)+"%"
document.getElementById("limitedFoodAccess").innerHTML=(state.limitedFoodAccess*100.0).toFixed(2)+"%"

document.getElementById("pollution").innerHTML=state.pollution.toFixed(3)+" ppm"
document.getElementById("foodHealthIndex").innerHTML=state.foodHealthIndex.toFixed(3)+""
document.getElementById("waterViolations").innerHTML=(state.waterViolations*100.0).toFixed(2)+"%"
document.getElementById("housingIssues").innerHTML=(state.housingIssues*100.0).toFixed(2)+"%"
document.getElementById("meanCommute").innerHTML=state.meanCommute.toFixed(1)+""

document.getElementById("healthCareCost").innerHTML="$"+state.healthCareCost.toFixed(2)
document.getElementById("popPerDoctorRatio").innerHTML=state.popPerDoctorRatio.toFixed(2)+""
document.getElementById("popPerDentistRatio").innerHTML=state.popPerDentistRatio.toFixed(2)+""
document.getElementById("popPerMentalHealthRatio").innerHTML=state.popPerMentalHealthRatio.toFixed(2)+""
document.getElementById("popOtherHealthRatio").innerHTML=state.popOtherHealthRatio.toFixed(2)+""
document.getElementById("diabeticScreening").innerHTML=(state.diabeticScreening*100.0).toFixed(2)+"%"
document.getElementById("mammogramScreening").innerHTML=(state.mammogramScreening*100.0).toFixed(2)+"%"
document.getElementById("unemploymentRate").innerHTML=(state.unemploymentRate*100.0).toFixed(2)+"%"

document.getElementById("incomeTax").innerHTML=state.UStaxRates.incomeTax+"%"
document.getElementById("propertyTax").innerHTML=state.UStaxRates.propertyTax+"%"
document.getElementById("salesTax").innerHTML=state.UStaxRates.salesTax+"%"

if(state.temp.fTemp==null)
  state.temp.fTemp=(state.temp.cTemp * 9.0 / 5.0) + 32.0
document.getElementById("temp").innerHTML=state.temp.cTemp.toFixed(1)+" degrees celsius, ("+state.temp.fTemp.toFixed(1)+" degrees farenheit)"
document.getElementById("tempDiffVal").innerHTML=Math.abs((state.temp.cTemp-11.96)).toFixed(1)+" degrees celsius, ("+((Math.abs(state.temp.cTemp-11.96) * 9.0 / 5.0) + 32.0).toFixed(1)+" degrees farenheit)"
var tempDiffStyle="border: none;"
text=""
if((state.temp.cTemp-11.96)>0.0){
  document.getElementById("tempDiffVal").innerHTML=document.getElementById("tempDiffVal").innerHTML+" ABOVE national average"
}else if((state.temp.cTemp-11.96)<0.0){
    document.getElementById("tempDiffVal").innerHTML=document.getElementById("tempDiffVal").innerHTML+" BELOW national average"
}else{
    document.getElementById("tempDiffVal").innerHTML=document.getElementById("tempDiffVal").innerHTML+" (equal to national average)"
}
if((state.temp.cTemp-11.96)>5.0){
  //text="Hotter average temp"
  tempDiffStyle="border: none; color:red;"
}else if((state.temp.cTemp-11.96)<-5.0){
  //text="Colder than average"
  tempDiffStyle="border: none; color:blue;"
}else{
  //text="Around average temp"
  tempDiffStyle="border: none; color:#ff8c00;"
}
document.getElementById("tempDiff").style=tempDiffStyle
document.getElementById("tooltiptexttempDiff").style.display="none"

var config = {
    apiKey: "AIzaSyAeVY1LvG9hNSBYb9_raGpYYDiHIvG3cY8",
    authDomain: "emovousers.firebaseapp.com",
    databaseURL: "https://emovousers.firebaseio.com/",
    storageBucket: "emovousers.appspot.com"
  }
firebase.initializeApp(config);

var currUser=isLoggedIn()
if(currUser!=null){
  //currUser["id"] =
  //currUser["name"] =
  //currUser["picture"] =
  //document.getElementById("displayButton").style="display: none;"
  document.getElementById("login").style="display: none;"
  document.getElementById("profileImg").src=currUser["picture"]
}
function Comment(t,d,p,li,di,id,na,pi,sv,ud){
  this.text=t
  this.date=d
  this.place=p
  this.likes=li
  this.dislikes=di
  this.profileID=id
  this.profileName=na
  this.profilePic=pi
  this.starVal=sv
  this.updownDiff=ud
}
getFirebaseComments()
function sendMessage(){
  //if(isLoggedIn()==true){
    var d=new Date();
    var starval=-1
    var ptext=document.getElementById("yourComment").value
    try{
      starval=parseInt($("input[name='star']:checked").val())
    }catch(err){
    }
    var text=ptext
    //var aComment=new Comment(text,d.getTime(),state,0,0,currUser["id"],currUser["name"],currUser["picture"])
    var aComment=new Comment(text,d.getTime(),state,0,0,"113578187980130918669","Joe","data:image/jpeg;base64,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",starval,0)
    //var profile = auth2.currentUser.get().getBasicProfile();
    /*var search=text.split(" ")
    for(var t in search){
      for(var k in cursewords){
        if(k in t){
          var rep=""
          for(var i=0;i<t.length;i++){
            rep+="*"
          }
          t=rep
        }
      }
    }
    text=' '.join(search)*/
    var array = new Uint32Array(1);
    window.crypto.getRandomValues(array);
    var uid=array[0]
    var sRef = firebase.database().ref().child("users").child("113578187980130918669").child("comments").child(uid)//send for users to see
    sRef.on("value", function(snapshot, prevChildKey) {//set it to profile
      var snapshotData = snapshot.val();
      sRef.set({aComment})
      firebase.database().ref().child("states").child(state.name).child("comments").child(uid).set({aComment})

      //})
    });
    //display comment
      var overall=document.getElementById("justSents")
      //overall.appendChild(document.createElement("br"))
      var urdiv = document.createElement("div")
      urdiv.className="userReply"
      var leftpicDiv=document.createElement("div")
      leftpicDiv.className="left-pic"
      var imageLink=document.createElement("a")
      imageLink.href="https://example.com"
      var profileImg=document.createElement("img")
      profileImg.src="data:image/jpeg;base64,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"//profile.getImageUrl();
      profileImg.style="border-radius: 50%;width:70px;height:70px;"
      imageLink.appendChild(profileImg)
      leftpicDiv.appendChild(imageLink)
      urdiv.appendChild(leftpicDiv)
      var rightDiv=document.createElement("div")
      rightDiv.className="right"
      var commentDiv=document.createElement("div")
      commentDiv.className="comment-body"
      commentDiv.appendChild(document.createTextNode(aComment.text))
      rightDiv.appendChild(commentDiv)
      var bottomDiv=document.createElement("div")
      var bytext="By "
      if(aComment.starVal!=-1){
        bytext="(Rated "+aComment.starVal+" stars), By "
      }
      ////console.log(bytext)
      bottomDiv.appendChild(document.createTextNode(bytext))
      var n = document.createElement('a');
      var lt = document.createTextNode("joe");
      n.appendChild(lt)
      n.href = "profile.html";
      bottomDiv.appendChild(n)
      var date = new Date(aComment.date);
      var day = date.getDate();
      var months = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];
      var month = months[date.getMonth()];
      var year = date.getFullYear();
      var stDate = month+" "+day+", "+year
      bottomDiv.appendChild(document.createTextNode(", "+stDate+", "))
      var score=document.createElement("span")
      score.id="score"
      score.innerHTML=(aComment.likes-aComment.dislikes)+""
      if(aComment.likes-aComment.dislikes==0)
        score.style="color:grey;"
      else if(aComment.likes-aComment.dislikes>0)
        score.style="color:green;"
      else if(aComment.likes-aComment.dislikes<0)
        score.style="color:orange;"
      bottomDiv.appendChild(score)
      /*var share=document.createElement("button")
      var sicon=document.createElement("i")
      sicon.className="fa fa-share-alt"
      share.appendChild(sicon)
      share.style="w3-button"
      share.onclick=function(){
        document.getElementById("myModal").style.display = "block";
        document.getElementById("modalText").innerHTML=this.innerHTML;
        window.onclick = function(event) {
          if (event.target == document.getElementById("myModal")) {
            document.getElementById("myModal").style.display = "none";
          }
        }
      }
      bottomDiv.appendChild(share)*/
      rightDiv.appendChild(bottomDiv)
      urdiv.appendChild(rightDiv)
      overall.appendChild(urdiv)
      document.getElementById("login").style="display:table; margin:0 auto"
      document.getElementById("login").innerHTML="Comment '"+text.slice(0,10)+"...' was added"
  /*}else{
    return;
  }*/
}
var getData=null
var deleteclicks={}
var editclicks={}
var updownvotes={}
function getFirebaseComments(){
  var totalStars=0.0
  var starRatingCount=0.0
  var ref=firebase.database().ref().child("states").child(state.name).child("comments")
  ref.on("value", function(snapshot, prevChildKey) {//set it to profile
    var snapshotData = snapshot.val();
    if(snapshotData!=null){
      getData=snapshotData
      var commentCount=0
      for(var i in snapshotData){
        var overall=document.getElementById("commentSpace")
        if(i<=9){
          overall.appendChild(document.createElement("br"))
        }
        if(snapshotData[i].aComment.starVal!=-1.0){
          totalStars+=parseFloat(snapshotData[i].aComment.starVal)
          starRatingCount+=1.0
        }
        updownvotes[i]=0
        var urdiv = document.createElement("div")
        urdiv.id=i+"-comment"
        urdiv.className="userReply"
        var leftpicDiv=document.createElement("div")
        leftpicDiv.className="left-pic"
        var profileImg=document.createElement("img")
        profileImg.src=snapshotData[i].aComment.profilePic
        profileImg.style="border-radius: 50%;width:70px;height:70px;"
        leftpicDiv.appendChild(profileImg)
        urdiv.appendChild(leftpicDiv)
        var rightDiv=document.createElement("div")
        rightDiv.className="right"
        var commentDiv=document.createElement("div")
        commentDiv.className="comment-body"
        commentDiv.appendChild(document.createTextNode(snapshotData[i].aComment.text))
        rightDiv.appendChild(commentDiv)
        var bottomDiv=document.createElement("div")
        bottomDiv.appendChild(document.createTextNode("By "))
        var n = document.createElement('a');
        var lt = document.createTextNode(snapshotData[i].aComment.profileName);
        n.appendChild(lt)
        n.href = "http://example.com";
        bottomDiv.appendChild(n)
        var date = new Date(snapshotData[i].aComment.date);
        var day = date.getDate();
        var months = ["January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"
        ];
        var month = months[date.getMonth()];
        var year = date.getFullYear();
        var stDate = month+" "+day+", "+year
        bottomDiv.appendChild(document.createTextNode(", "+stDate+", ")) //bottomDiv
        var score=document.createElement("span")
        score.id=i+"-score"
        score.innerHTML=(snapshotData[i].aComment.likes-snapshotData[i].aComment.dislikes)+""
        if(snapshotData[i].aComment.likes-snapshotData[i].aComment.dislikes==0)
          score.style="color:grey;"
        else if(snapshotData[i].aComment.likes-snapshotData[i].aComment.dislikes>0)
          score.style="color:green;"
        else if(snapshotData[i].aComment.likes-snapshotData[i].aComment.dislikes<0)
          score.style="color:orange;"
        bottomDiv.appendChild(score)
        bottomDiv.appendChild(document.createTextNode(", "))
        //check if if(currUser["jd"]) exists
        var reply=document.createElement("button")
        reply.id=i+"-reply"
        var ricon=document.createElement("i")
        ricon.className="fa fa-reply"
        reply.appendChild(ricon)
        reply.style="w3-button"
        if(currUser==null)//  make IT NOT
        {
          reply.onclick=function(){
            var rid=this.id.split("-")
            if(getData[parseInt(rid[0])].aComment.text.length<=50)
              document.getElementById("yourComment").value="Reply to: "+getData[parseInt(rid[0])].aComment.profileName+"'s comment '"+getData[parseInt(rid[0])].aComment.text+"'"
            else
              document.getElementById("yourComment").value="Reply to: "+getData[parseInt(rid[0])].aComment.profileName+"'s comment '"+getData[parseInt(rid[0])].aComment.text.slice(0,50)+"...'"
          }
          if("113578187980130918669"==snapshotData[i].aComment.profileID){
            var upvote=document.createElement("button")
            upvote.id=i+"-upvote"
            var uicon=document.createElement("i")
            uicon.className="fa fa-thumbs-up"
            upvote.appendChild(uicon)
            upvote.onclick=function(){
              var pid=this.id.split("-")
              updownvotes[parseInt(pid[0])]=1
              getData[parseInt(pid[0])].aComment.likes+=1
              var diff=getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes
              if(diff>=2){
                this.style.background="#CDCDCD"
                getData[parseInt(pid[0])].aComment.likes-=diff
              }else if(diff==1){
                this.style.background="#99badd"
              }else if(diff==0){
                this.style.background="#99badd"
                getData[parseInt(pid[0])].aComment.likes+=1
                document.getElementById(pid[0]+"-downvote").style.background="#CDCDCD"
              }
              var gscore=pid[0]+"-score"
              getData[parseInt(pid[0])].updownDiff=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)
              document.getElementById(gscore).innerHTML=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)+""
              if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes==0)
                document.getElementById(gscore).style="color:grey;"
              else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes>0)
                document.getElementById(gscore).style="color:green;"
              else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes<0)
                document.getElementById(gscore).style="color:orange;"
            }
            bottomDiv.appendChild(upvote)
            var downvote=document.createElement("button")
            downvote.id=i+"-downvote"
            var dicon=document.createElement("i")
            dicon.className="fa fa-thumbs-down"
            downvote.appendChild(dicon)
            downvote.style="w3-button"
            downvote.onclick=function(){
              var pid=this.id.split("-")
              updownvotes[parseInt(pid[0])]=-1
              getData[parseInt(pid[0])].aComment.dislikes+=1
              var diff=getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes
              if(diff<=-2){
                this.style.background="#CDCDCD"
                getData[parseInt(pid[0])].aComment.dislikes+=diff
              }else if(diff==-1){
                this.style.background="#ED4337"
              }else if(diff==0){
                this.style.background="#ED4337"
                getData[parseInt(pid[0])].aComment.dislikes+=1
                document.getElementById(pid[0]+"-upvote").style.background="#CDCDCD"
              }
              var gscore=pid[0]+"-score"
              getData[parseInt(pid[0])].updownDiff=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)
              document.getElementById(gscore).innerHTML=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)+""
              if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes==0)
                document.getElementById(gscore).style="color:grey;"
              else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes>0)
                document.getElementById(gscore).style="color:green;"
              else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes<0)
                document.getElementById(gscore).style="color:orange;"
            }
            bottomDiv.appendChild(downvote)
            var edit=document.createElement("button")
            edit.id=snapshotData[i].aComment.profileID+"-edit"
            var eicon=document.createElement("i")
            eicon.className="fa fa-pencil"
            edit.appendChild(eicon)
            edit.onclick=function(){
              var eid=this.id.split("-")
              editclicks[eid[0]]+=1
              if(editclicks[eid[0]]%2==1){
                this.style.background="#FFFFD5"
                document.getElementById(eid+"-comment").style.display="none"
                document.getElementById("yourComment").value=getData[parseInt(pid[0])].aComment.text
              }else{
                document.getElementById(eid+"-comment").style.display="block"
                this.style.background="#CDCDCD"
              }
            }
            bottomDiv.appendChild(edit)
            var trash=document.createElement("button")
            trash.id=snapshotData[i].aComment.profileID+"-trash"
            var ticon=document.createElement("i")
            ticon.className="fa fa-trash-o"
            trash.appendChild(ticon)
            deleteclicks[i]=0
            editclicks[i]=0
            trash.onclick=function(){
              var tid=this.id.split("-")
              deleteclicks[tid[0]]+=1
              if(deleteclicks[tid[0]]%2==1){
                this.style.background="#90EE90"
              }else{
                this.style.background="#CDCDCD"
              }
            }
            trash.style="w3-button"
            bottomDiv.appendChild(trash)
          }
        }/*else{
          bottomDiv.appendChild(reply)
        }*/
        bottomDiv.appendChild(reply)
        rightDiv.appendChild(bottomDiv)
        urdiv.appendChild(rightDiv)
        if(commentCount>9){
          urdiv.style="display:none;"
        }
        commentCount++
        overall.appendChild(urdiv)
        //document.body.appendChild(document.createElement("br"))
      }
    }
    if(starRatingCount==0){
      document.getElementById("avgStar").innerHTML=state.name+" has 0 reviews. Be the first!"
    }else{
      document.getElementById("avgStar").innerHTML="Average location rating of "+totalStars/starRatingCount+" stars with "+starRatingCount+" reviews."
    }
  })
}
function leave(){
  //check getData
  var deleteclicks={}
  var editclicks={}
  var updownvotes={}
  var ref=firebase.database().ref().child("states").child(state.name).child("comments")
  ref.on("value", function(snapshot, prevChildKey) {//set it to profile
    var snapshotData = snapshot.val();
    if(snapshotData!=null){
      for(var i in snapshotData){
        comment=snapshotData[i].aComment
        if(editclicks[i]%2==1){
          ref.child(i).set(null) //delete old comment
        }
        else if(deleteclicks[i]%2==1){
          ref.child(i).set(null) //delete this comment
        }
        if(updownvotes[i]==1){
          comment.likes+=1
        }else if(updownvotes[i]==-1){
          comment.likes-=1
        }
        ref.child(i).set(comment)
      }
    }
  })
}
function onCitySearchClick(){ //begin a city search, grab city list here and pass it
  leave()
  localStorage.setItem('currState',JSON.stringify(state)) //make it a state object
  location.href="loadingUSCities.html"
}
$(window).scroll(function() {
  if($(window).scrollTop() == $(document).height() - $(window).height()) {
    withModal=$("div:hidden").slice(0, 10).fadeIn()
  }
});
function isLoggedIn()
{
  if(localStorage.getItem('currUser') == null){
    return null;
  } else {
    return localStorage.getItem('currUser');
  }
}
function getComments(snapshotData2){
  var totalStars=0.0
  var starRatingCount=0.0
  var commentCount=0
  for(var i in snapshotData2){
    var snapshotData=snapshotData2[i][1]
    var overall=document.getElementById("updownSort")
    if(i<=9){
      overall.appendChild(document.createElement("br"))
    }
    if(snapshotData.aComment.starVal!=-1.0){
      totalStars+=parseFloat(snapshotData.aComment.starVal)
      starRatingCount+=1.0
    }
    updownvotes[i]=0
    var urdiv = document.createElement("div")
    urdiv.id=i+"-comment"
    urdiv.className="userReply"
    var leftpicDiv=document.createElement("div")
    leftpicDiv.className="left-pic"
    var profileImg=document.createElement("img")
    profileImg.src=snapshotData.aComment.profilePic
    profileImg.style="border-radius: 50%;width:70px;height:70px;"
    leftpicDiv.appendChild(profileImg)
    urdiv.appendChild(leftpicDiv)
    var rightDiv=document.createElement("div")
    rightDiv.className="right"
    var commentDiv=document.createElement("div")
    commentDiv.className="comment-body"
    commentDiv.appendChild(document.createTextNode(snapshotData.aComment.text))
    rightDiv.appendChild(commentDiv)
    var bottomDiv=document.createElement("div")
    bottomDiv.appendChild(document.createTextNode("By "))
    var n = document.createElement('a');
    var lt = document.createTextNode(snapshotData.aComment.profileName);
    n.appendChild(lt)
    n.href = "http://example.com";
    bottomDiv.appendChild(n)
    var date = new Date(snapshotData.aComment.date);
    var day = date.getDate();
    var months = ["January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];
    var month = months[date.getMonth()];
    var year = date.getFullYear();
    var stDate = month+" "+day+", "+year
    bottomDiv.appendChild(document.createTextNode(", "+stDate+", ")) //bottomDiv
    var score=document.createElement("span")
    score.id=i+"-score"
    score.innerHTML=(snapshotData.aComment.likes-snapshotData.aComment.dislikes)+""
    if(snapshotData.aComment.likes-snapshotData.aComment.dislikes==0)
      score.style="color:grey;"
    else if(snapshotData.aComment.likes-snapshotData.aComment.dislikes>0)
      score.style="color:green;"
    else if(snapshotData.aComment.likes-snapshotData.aComment.dislikes<0)
      score.style="color:orange;"
    bottomDiv.appendChild(score)
    bottomDiv.appendChild(document.createTextNode(", "))
    var upvote=document.createElement("button")
    upvote.id=i+"-upvote"
    var uicon=document.createElement("i")
    uicon.className="fa fa-thumbs-up"
    upvote.appendChild(uicon)
    upvote.onclick=function(){
      var pid=this.id.split("-")
      updownvotes[parseInt(pid[0])]=1
      getData[parseInt(pid[0])].aComment.likes+=1
      var diff=getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes
      if(diff>=2){
        this.style.background="#CDCDCD"
        getData[parseInt(pid[0])].aComment.likes-=diff
      }else if(diff==1){
        this.style.background="#99badd"
      }else if(diff==0){
        this.style.background="#99badd"
        getData[parseInt(pid[0])].aComment.likes+=1
        document.getElementById(pid[0]+"-downvote").style.background="#CDCDCD"
      }
      var gscore=pid[0]+"-score"
      getData[parseInt(pid[0])].updownDiff=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)
      document.getElementById(gscore).innerHTML=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)+""
      if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes==0)
        document.getElementById(gscore).style="color:grey;"
      else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes>0)
        document.getElementById(gscore).style="color:green;"
      else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes<0)
        document.getElementById(gscore).style="color:orange;"
    }
    bottomDiv.appendChild(upvote)
    var downvote=document.createElement("button")
    downvote.id=i+"-downvote"
    var dicon=document.createElement("i")
    dicon.className="fa fa-thumbs-down"
    downvote.appendChild(dicon)
    downvote.style="w3-button"
    downvote.onclick=function(){
      var pid=this.id.split("-")
      updownvotes[parseInt(pid[0])]=-1
      getData[parseInt(pid[0])].aComment.dislikes+=1
      var diff=getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes
      if(diff<=-2){
        this.style.background="#CDCDCD"
        getData[parseInt(pid[0])].aComment.dislikes+=diff
      }else if(diff==-1){
        this.style.background="#ED4337"
      }else if(diff==0){
        this.style.background="#ED4337"
        getData[parseInt(pid[0])].aComment.dislikes+=1
        document.getElementById(pid[0]+"-upvote").style.background="#CDCDCD"
      }
      var gscore=pid[0]+"-score"
      getData[parseInt(pid[0])].updownDiff=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)
      document.getElementById(gscore).innerHTML=(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes)+""
      if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes==0)
        document.getElementById(gscore).style="color:grey;"
      else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes>0)
        document.getElementById(gscore).style="color:green;"
      else if(getData[parseInt(pid[0])].aComment.likes-getData[parseInt(pid[0])].aComment.dislikes<0)
        document.getElementById(gscore).style="color:orange;"
    }
    bottomDiv.appendChild(downvote)
    //check if if(currUser["jd"]) exists
    var reply=document.createElement("button")
    reply.id=i+"-reply"
    var ricon=document.createElement("i")
    ricon.className="fa fa-reply"
    reply.appendChild(ricon)
    reply.style="w3-button"
    if(currUser==null)//  make IT NOT
    {
      reply.onclick=function(){
        var rid=this.id.split("-")
        if(getData[parseInt(rid[0])].aComment.text.length<=50)
          document.getElementById("yourComment").value="Reply to: "+getData[parseInt(rid[0])].aComment.profileName+"'s comment '"+getData[parseInt(rid[0])].aComment.text+"'"
        else
          document.getElementById("yourComment").value="Reply to: "+getData[parseInt(rid[0])].aComment.profileName+"'s comment '"+getData[parseInt(rid[0])].aComment.text.slice(0,50)+"...'"
      }
      if("113578187980130918669"==snapshotData.aComment.profileID){
        var edit=document.createElement("button")
        edit.id=snapshotData.aComment.profileID+"-edit"
        var eicon=document.createElement("i")
        eicon.className="fa fa-pencil"
        edit.appendChild(eicon)
        edit.onclick=function(){
          var eid=this.id.split("-")
          editclicks[eid[0]]+=1
          if(editclicks[eid[0]]%2==1){
            this.style.background="#FFFFD5"
            document.getElementById(eid+"-comment").style.display="none"
            document.getElementById("yourComment").value=getData[parseInt(pid[0])].aComment.text
          }else{
            document.getElementById(eid+"-comment").style.display="block"
            this.style.background="#CDCDCD"
          }
        }
        bottomDiv.appendChild(edit)
        var trash=document.createElement("button")
        trash.id=snapshotData.aComment.profileID+"-trash"
        var ticon=document.createElement("i")
        ticon.className="fa fa-trash-o"
        trash.appendChild(ticon)
        deleteclicks[snapshotData2[i]]=0
        editclicks[snapshotData2[i]]=0
        trash.onclick=function(){
          var tid=this.id.split("-")
          deleteclicks[tid[0]]+=1
          if(deleteclicks[tid[0]]%2==1){
            this.style.background="#90EE90"
          }else{
            this.style.background="#CDCDCD"
          }
        }
        trash.style="w3-button"
        bottomDiv.appendChild(trash)
      }
    }/*else{
      bottomDiv.appendChild(reply)
    }*/
    bottomDiv.appendChild(reply)
    rightDiv.appendChild(bottomDiv)
    urdiv.appendChild(rightDiv)
    if(commentCount>9){
      urdiv.style="display:none;"
    }
    commentCount++
    overall.appendChild(urdiv)
    //document.body.appendChild(document.createElement("br"))
  }
}
function filter() {
  var input = document.getElementById("input");
  var fil = input.value.toUpperCase();
  var choice=document.getElementById("commentFilter").value
  if(choice=="keywords"){
    var commentSpace = document.getElementById("commentSpace");
    var coms = commentSpace.getElementsByClassName("comment-body");
    ////console.log(coms)
    for (i = 0; i < coms.length; i++) {
        txtValue = coms[i].innerHTML
        ////console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(fil) > -1) {
            coms[i].style.display = "";
        } else {
            coms[i].style.display = "none";
        }
    }
  }
  if(choice=="keywords"){
    var commentSpace = document.getElementById("commentSpace");
    var coms = commentSpace.getElementsByClassName("comment-body");
    var fil = input.value.toUpperCase();
    ////console.log(coms)
    for (i = 0; i < coms.length; i++) {
        txtValue = coms[i].innerHTML
        ////console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(fil) > -1) {
            coms[i].style.display = "";
        } else {
            coms[i].style.display = "none";
        }
    }
  }else if(choice=="commenter"){
    var commentSpace = document.getElementById("commentSpace");
    var coms = commentSpace.getElementsByTagName("a");
    var fil = input.value.toUpperCase();
    //console.log(coms)
    for (i = 0; i < coms.length; i++) {
        txtValue = coms[i].innerHTML
        //console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(fil) > -1) {
            coms[i].style.display = "";
        } else {
            coms[i].style.display = "none";
        }
    }
  }
  else if(choice=="replies"){
    var commentSpace = document.getElementById("commentSpace");
    var coms = commentSpace.getElementsByClassName("comment-body");
    var pfil="Reply to: "+"Michael"+"'s"//currUser
    var fil=pfil.toUpperCase()
    //console.log(coms)
    for (i = 0; i < coms.length; i++) {
        txtValue = coms[i].innerHTML
        //console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(fil) > -1) {
            coms[i].style.display = "";
        } else {
            coms[i].style.display = "none";
        }
    }
  }  /*else if(choice=="mostLiked"){
      var items = Object.keys(getData).map(function(key) {
        return [key, getData[key]];
      });
      //console.log(items)
      items.sort(function(s1,s2) {
        var s1diff=s1[1].aComment.likes-s1[1].aComment.dislikes
        var s2diff=s2[1].aComment.likes-s2[1].aComment.dislikes
        return s2diff-s1diff
      });
      //console.log(items)
      document.getElementById("commentSpace").style.display="none"
      getComments(items)
    }*/
  /*
  <option value="mostLiked">Most liked</option>
  <option value="commenter">Commenter</option>
  <option value="replies">Replies to you</option>
  */
}
</script>
</html>
